# High-Level Design
---

## 1) Загальний опис архітектури

Наша система побудована за принципом **клієнт–сервер** із **REST API** між фронтендом і бекендом. Обрано **трьохшарову архітектуру** (презентаційний шар, бізнес-логіка, доступ до даних): тонкий веб-клієнт працює з бекендом (Django), який інкапсулює доменні правила та спілкується з **PostgreSQL** через ORM. Для карт і логістики інтегровано **Mapbox**. Онлайн-оплати проходять через **LiqPay**.

## Архітектурний стиль 

- **Стиль:** 3-шаровий **моноліт** із клієнт-серверною взаємодією (REST)
- **Чому так:**  
  - Баланс між **простотою** й **гнучкістю** (ADR-001)
  - Швидкий старт і структурованість з **Django** (ADR-002)
  - Навантаження й складність зараз не виправдовують мікросервіси; однак логічне розділення шарів полегшує подальшу еволюцію

---

## 2) Основні компоненти

- **Web UI (Frontend)** — SPA/MPA клієнт, відображення меню, кошик, оформлення, профілі, панелі кухаря/кур’єра/менеджера; фільтри/сортування виконуються на клієнті (ADR-004).
- **API Gateway / Backend (Django)** — REST-контролери, авторизація, доменні сервіси (замовлення, оплати, меню, користувачі), інтеграції (LiqPay, Mapbox).
- **Data Access (ORM)** — моделі та репозиторії до **PostgreSQL** (ADR-005).
- **External Integrations**  
  - **LiqPay** — платежі (створення/підтвердження, вебхуки) (ADR-006)
  - **Mapbox** — карти, геокодування, маршрути (ADR-003)

**Комунікації (коротко):**
- Frontend ↔ Backend: **HTTPS REST (JSON)**, JWT-сесії/кукі
- Backend ↔ DB: **ORM/SQL**
- Backend ↔ LiqPay: **HTTPS API + вебхуки**
- Frontend ↔ Mapbox: **картографічні SDK** (клієнт), інколи бекенд-допоміжні виклики

---

## 3) Діаграма компонентів

<img width="778" height="546" alt="Знімок екрана 2025-10-01 о 16 54 29" src="https://github.com/user-attachments/assets/a02f2674-7492-43be-939f-584cacedf625" />

Це діаграма компонентів, яка показує високорівневу архітектуру системи доставки їжі,і також побудована за принципом 3-шарової архітектури (Client – Server – DB) з інтеграцією двох зовнішніх сервісів: Mapbox і LiqPay.

**Всередині нашого вебсайту:**

- Client (Web page) — інтерфейс користувача (React/HTML), де користувачі працюють із меню, акаунтами та замовленнями
- Server (Django) — бекенд, що реалізує бізнес-логіку (Menu CRUD API, Order API, Account API)
- ORM (Django’s ORM) — шар доступу до даних, який пов’язує бізнес-логіку з базою даних
- DB (PostgreSQL) — основна база даних для зберігання меню, замовлень, користувачів тощо
  
**Зовнішні сервіси:**

- Mapbox (Map service) — інтеграція карти для відображення маршрутів та геолокацій (Map widget, Routing API)
- LiqPay (Payment provider) — провайдер онлайн-оплат (взаємодія через Payment widget та підтвердження платежу)
  
**Зв’язки між компонентами:**

- Клієнт взаємодіє з бекендом через API (CRUD для меню, API замовлень та акаунтів)
- Django сервер через ORM працює з PostgreSQL
- Mapbox надає клієнту карту та маршрути
LiqPay інтегрований через віджет на клієнті, а підтвердження оплати надходить на сервер

---

## 4) Ключові архітектурні рішення (ADR)
- ADR-001: 3-шарова клієнт–серверна архітектура 
- ADR-002: Django як бекенд-фреймворк 
- ADR-003: Mapbox як картографічний сервіс
- ADR-004: Фільтрація/сортування меню на клієнті 
- ADR-005: PostgreSQL як основна БД 
- ADR-006: LiqPay як платіжний провайдер 

Деталі — у відповідних ADR файлах (переваги/недоліки/наслідки/план впровадження)

---

## 5) Технологічний стек
- Frontend: React (JavaScript)
- Backend: Python, Django
- Database: PostgreSQL
- Payments: LiqPay 
- Maps: Mapbox
- Extra: Django ORM
---

## 6) Як компоненти взаємодіють (контракти/інтерфейси)

- Client надсилає HTTP-запити на Server через REST API.
- Server обробляє бізнес-логіку та взаємодіє з ORM для доступу до PostgreSQL.
- Mapbox інтегрується для побудови маршрутів і відображення карт (через Routing API).
- LiqPay використовується для онлайн-оплат (Payment Widget + Payment Confirmation).
