# Вимоги

## Мета і обсяг

**Мета**:  
Система — це вебзастосунок для замовлення та доставки їжі. Вона дозволяє клієнтам переглядати меню, шукати та фільтрувати страви, додавати їх у кошик і оформляти замовлення зручним способом оплати та доставки.  
Менеджери отримують інструменти для керування меню, перегляду звітів та контролю обмежень, кухарі — для прийому замовлень, а кур’єри — для оптимізованої доставки.  

**Обсяг**:  
- **Для клієнтів:** перегляд меню, пошук і фільтрація, кастомізація, кошик, оформлення замовлення, оплата, акаунт і лояльність.  
- **Для персоналу:** кухарі бачать замовлення в реальному часі, кур’єри — маршрути та замовлення на карті, менеджери — звіти та інструменти адміністрування.  
- **Для системи:** інтеграція з платіжним провайдером, підтримка реального часу для оновлень замовлень, забезпечення продуктивності та безпеки.  

Основні зацікавлені сторони:  
- **Клієнти** (зареєстровані й "гості")  
- **Менеджери** (адміністрування меню, звіти)  
- **Кухарі** (приготовлення замовлень)  
- **Кур’єри** (доставка)  
- **Платіжний провайдер** (онлайн-оплати)  

---

## Функціональні вимоги

### Меню страв

- **FR-001**: Домашня сторінка відображає повний список страв у меню.  
- **FR-002**: Клієнт може обрати категорію страв через вкладки зверху.  
- **FR-003**: Клієнт може сортувати страви за ціною (зростання/спадання) у будь-якій категорії.  
- **FR-004**: Клієнт може фільтрувати страви за інгредієнтами** (мають/не мають) у будь-якій категорії.  
- Система вважає алкогольні та безалкогольні напої окремими категоріями.
- Система дозволяє відмітити страву як улюблену або зняти цю відмітку.
- Система відображає всі улюблені користувачем страви як окрему категорію.
- Система дозволяє шукати страви за назвою у будь-якій категорії.
- Система має окрему категорію під кастомну піцу.
- Система дозволяє надавати будь-які інгредієнти з наданого списку до кастомної піци.


### Замовлення страв

Всі ці можливості надаються клієнтам.

- Система дозволяє класти страви в кошик у зазначеній кількості.
- Система дозволяє прибирати страви з кошику.
- Система показує сумарну вартість всього в кошику.
- Система дозволяє змінювати кількість кожної страви в кошику.
- Система дозволяє прибрати будь-які інгредієнти з будь-якої страви в кошику.
- Система вимагає непорожнього кошику, щоб офоримити замовлення.
- Система вимагає вказати ім'я, спосіб доставки та спосіб оплати, щоб завершити замовлення.
- Система надає 2 способи доставки: самовивіз та вказати адресу.
- Система надає 3 способи оплати: готівка, кредитка дистанційно та кредитка при отриманні.
- Якщо кошик містить алкогольні напої, система не дозволяє обрати кредитку дистанційно.
- Система дозволяє залишити кур'єру чайові.

### Доставка замовлень

- **FR-005**: Замовлення послідовно переходить через стани: «не готове» → «приготоване» → «у доставці» → «доставлене» → «сплачене».  
- **FR-006**: Кур’єр може взяти приготоване замовлення.  
- **FR-007**: Коли кур’єр обирає замовлення, усі приготовані замовлення відображаються на мапі з номерами.  
- **FR-008**: Кур’єр бачить активні замовлення і найкращий маршрут** на своїй мапі.  
- **FR-009**: Кур’єр може позначити замовлення як доставлене одразу після доставки.  

### Оплата замовлень

- **FR-010**: Клієнт може обрати спосіб оплати: готівка, картка на місці, **картка онлайн.  
- **FR-011**: Дистанційна оплата обробляється через довіреного платіжного провайдера.  
- **FR-012**: Замовлення з дистанційною оплатою маркується як сплачене заздалегідь після підтвердження від провайдера.  
- **FR-013**: Система зберігає для кожного замовлення спосіб оплати та ціну.  
- **FR-014**: Менеджери бачать у системі інформацію про ціну та оплату кожного замовлення.  
- **FR-015**: Замовлення, сплачене готівкою, менеджер маркує як «сплачене вручну», коли кур’єр приносить гроші.  
- **FR-016**: Замовлення, сплачене карткою, система маркує як «сплачене автоматично» після підтвердження транзакції.  

### UX та акаунти

- Система надає можливість вмикати темну тему з будь-якої сторінки.
- Користувач має змогу зробити замовлення без реєстрації
- Незареєстрований клієнт може створити акаунт.
- Клієнт може увійти в акаунт за допомогою номера телефона та пароля. 
- Залогінений клієнт може вийти з акаунту.
- Кожен акаунт користувача автоматично приймає участь в програмі лояльності.
- Система веде та показує історію замовлень для кожного акаунту.
- Система зберігає контактні дані та останню адресу замовлення кожного залогіненого користувача.
- Для залогінених користувачів система автоматично підставляє контактні дані та адресу у форму замовлення.  

### Керування меню

- **FR-018**: Менеджер може додати страву до меню за допомогою форми, яка вимагає назву, опис, фото та ціну.
- **FR-019**: Менеджер може відредагувати страву в меню за допомогою тої ж форми.
- **FR-020**: Система повідомляє клієнта, якщо страва, яка лежала в його кошику чи неоплаченому замовленні, була відредагована.
- **FR-021**: Менеджер може видалити страву з меню.
- **FR-022**: Система повідомляє клієнта, якщо страва, яка лежала в його кошику чи неоплаченому замовленні, була видалена.
- **FR-023**: Менеджер може позначити страву як доступну чи тимчасово недоступну.
- **FR-024**: Система показує тимчасово недоступні страви клієнтам, але в кінці всіх списків та сірими.
- **FR-025**: Клієнти не можуть замовити видалену або тимчасово недоступну страву.

### Робота персоналу

- **FR-026**: Система надає змогу транслювати замовлення із примітками користувача на екран, у реальному часі.
- **FR-027**: Кур'єр може відкривати список замовлень та маршрут між ними на мапі.
- **FR-028**: Кур'єр може сортувати адреси доставок за відстанню.
- **FR-029**: Менеджер може відкривати звіти та показувати дані по продажах за різний час.
- **FR-030**: Клієнт не може замовляти більше страв за встановлений менеджером ліміт.
- **FR-031**: Клієнту прихожить повідомлення, якщо ліміт перевищений.

### Техпідтримка

- Система надає клієнту можливість переглядати часті питання на сторінці FAQ.
- Система надає клієнту можливість переглядати питання за темою.
- Система надає клієнту можливість написати техпідтримці.

## Нефункціональні вимоги

### Припущення та обмеження
- **A-001**: Нормальне навантаження є 100 одночасних користувачів.
- **A-002**: Географія доставки обмежена встановленими зонами сервісу.  
- **C-001**: Менеджерські операції доступні лише авторизованим користувачам з роллю *manager*.  
- **C-002**: Дистанційні оплати виконуються виключно через інтегрований платіжний провайдер; дані карток не зберігаються.  
- **C-003**: Продаж алкоголю підпорядковується локальному законодавству; онлайн-оплата для замовлень з алкоголем неможлива.  

### Ефективність продуктівності

Ці умови виконуються для 95% запитів при нормальному навантаженні в 100 одночасних користувачів, якщо не вказано інше.

- **PERF-001**: Сторінка меню страв має вантажитись за 1с.
- **PERF-002**: При виборі категорії, сортуванні, фільтруванні сторінка меню страв має оновитись за 0.5с.
- **PERF-003**: Коли хтось просуває стан замовлення, він змінюється за 0.5с.
- **PERF-004**: Мапа кур'єра має завантажитись за 1с.
- **PERF-005**: Вхід в акаунт відбувається за 1с.
- **PERF-006**: Вихід з акаунту відбувається за 0.5с.

### Безпека

- **SEC-001**: Всі паролі хешуються argon2id зі значеннями мороки, рекомендованими owasp.
- **SEC-002**: Вся комунікація де треба протокол HTTP відбувається винятково через HTTPS з TLS 1.2.
- **SEC-003**: Система підтримує TLS 1.3 для всіх комунікацій.
- **SEC-004**: Система ніколи не зберігає платіжні реквізити клієнта.
- **SEC-005**: Система вимагає підтвердження дистанційної оплати від банківського застосунку.

### Зручність

Ці умови виконуються для 80% тестових користувачів, незнайомих з системою, без пояснень чи тренування від нас.

- **USAB-001**: Клієнти мають змогти щось замовити за 3хв.
- **USAB-002**: Клієнти мають змогти створити акаунт за 2хв.
- **USAB-003**: Кур'єри мають змогти взяти замовлення за 1хв.
- **USAB-004**: Кур'єри мають змогти здати замовлення за 30с.

### Надійність 

- **REL-001**: **Uptime** системи за місяць ≥ **99.5%**.  
- **REL-002**: Кошик користувача зберігається локально при втраті зв’язку і відновлюється після перепідключення. 

---

## Ризики та відкриті питання
- **R-001**: Відмова або затримки платіжного провайдера можуть заблокувати замовлення → потрібна обробка стану «очікує підтвердження». 
- **R-002**: Точність геолокації кур’єра може бути низькою → потрібні резервні механізми (адреса/контакт). 
- **OQ-001**: Який саме платіжний провайдер буде обраний (Mono Pay, ApplePay/GooglePay)?
- **OQ-002**: Як саме визначаються та оновлюються зони доставки?
